# =============================================================================
# KULTI ENVIRONMENT CONFIGURATION
# =============================================================================
# Complete guide: See Docs/ENV_VARIABLES_CHECKLIST.md
#
# SETUP INSTRUCTIONS:
# 1. Local Development: Copy this file to .env.local
# 2. Production: Set variables in Vercel Dashboard (Settings → Environment Variables)
# 3. Never commit .env.local or secrets to git
# 4. Keep this file as reference only - update when new variables are added
# =============================================================================

# =============================================================================
# SECTION 1: REQUIRED - Supabase (Database & Auth)
# =============================================================================
#
# CRITICAL: These are required for application to run
# Where to get:
#   - Dashboard: https://app.supabase.com/
#   - Navigate to: Project Settings → API
#   - Copy both URL and API Keys
#
# Security Notes:
#   - NEXT_PUBLIC_* prefix = Safe for frontend, visible to users
#   - Service Role Key = SENSITIVE - Server-only, never expose to frontend
#   - Rotate keys every 90 days in production
#   - If compromised, rotate immediately and update all environments
#
# Example Format:
#   URL: https://abcdefghijklmn.supabase.co
#   Keys: Long JWT string starting with eyJ...

NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# Optional: Only needed for CLI operations (npm run db:*) from local machine
# Get from: Supabase Dashboard → Account → Access Tokens
# Verify: This token is only used locally, never in production
SUPABASE_ACCESS_TOKEN=your_supabase_access_token

# =============================================================================
# SECTION 2: REQUIRED - 100ms HMS (Video Conferencing)
# =============================================================================
#
# CRITICAL: Required for video sessions to work
# Where to get:
#   - Dashboard: https://dashboard.100ms.live/
#   - Navigate to: App Details (for App ID)
#   - Navigate to: Developer (for Access Key & Secret)
#   - Navigate to: Templates (for Template ID)
#
# Important:
#   - HMS_APP_ID: Your application identifier (public)
#   - HMS_APP_ACCESS_KEY: Authentication credential (sensitive)
#   - HMS_APP_SECRET: Signing secret (sensitive - never expose)
#   - HMS_TEMPLATE_ID: Configuration template for video rooms
#   - Credentials are used to mint room tokens for video sessions
#
# Example:
#   APP_ID: 6294xxxxxxxxxxxxx
#   TEMPLATE_ID: 6294xxxxxxxxxxxxx

NEXT_PUBLIC_HMS_APP_ID=your_hms_app_id
HMS_APP_ACCESS_KEY=your_hms_access_key
HMS_APP_SECRET=your_hms_app_secret
HMS_TEMPLATE_ID=your_hms_template_id

# HLS Streaming Threshold (Advanced Configuration)
# When session participants exceed this count, new viewers automatically
# switch to HLS streaming (HTTP Live Streaming) instead of WebRTC P2P
# for better scalability. Hosts and presenters stay on WebRTC.
#
# Tradeoff:
#   - Lower value = Less bandwidth for hosts (better experience for presenters)
#   - Higher value = More bandwidth for hosts (P2P until threshold reached)
#
# Recommended: 100 (suitable for most use cases)
# For low-bandwidth: 50
# For high-bandwidth: 200+
# HLS_THRESHOLD=100

# =============================================================================
# SECTION 3: REQUIRED - Anthropic Claude API (AI Features)
# =============================================================================
#
# CRITICAL: Required for AI chat and features
# Where to get:
#   - Dashboard: https://console.anthropic.com/
#   - Navigate to: API Keys (in left menu)
#   - Create new API key and copy
#
# Important:
#   - Format: Starts with "sk-ant-"
#   - This is sensitive - never expose in frontend or logs
#   - Used for Claude AI conversations in sessions
#   - Subject to rate limiting based on your plan
#   - Monitor usage in Anthropic dashboard
#
# Cost: Based on tokens used (roughly $0.003 per 1K tokens)
# Billing: https://console.anthropic.com/account/billing/overview

ANTHROPIC_API_KEY=your_anthropic_api_key

# =============================================================================
# SECTION 4: REQUIRED - Application Configuration
# =============================================================================
#
# Core application settings
#
# NEXT_PUBLIC_APP_URL:
#   - Base URL where your app is deployed
#   - Used for OAuth redirects, email links, social sharing
#   - Must be HTTPS in production (no exceptions)
#   - Should match domain configured in Supabase Auth settings
#   - Example formats:
#       Local: http://localhost:5555
#       Staging: https://staging.kulti.club
#       Production: https://kulti.club
#
# NODE_ENV:
#   - Controls Next.js build optimization and feature flags
#   - Values: development | staging | production
#   - Development: More logging, slower optimizations, better debugging
#   - Production: Maximum optimization, minimal logging, error tracking enabled
#

# Development configuration (default for local development)
NEXT_PUBLIC_APP_URL=http://localhost:5555
NODE_ENV=development

# Production configuration (uncomment for production deployment)
# NEXT_PUBLIC_APP_URL=https://kulti.club
# NODE_ENV=production

# =============================================================================
# SECTION 5: OPTIONAL (RECOMMENDED) - Upstash Redis for Rate Limiting
# =============================================================================
#
# For Production Deployments: HIGHLY RECOMMENDED
# Without Redis: Uses in-memory storage (not suitable for multiple instances)
#
# Where to get:
#   - Dashboard: https://upstash.com/ (free tier available)
#   - Create database, select REST API option
#   - Copy REST URL and REST Token
#   - Pricing: Free tier includes 10,000 daily commands
#
# Purpose:
#   - Rate limiting across multiple API instances
#   - Distributed caching
#   - Session store for serverless functions
#
# Format:
#   URL: https://[name]-[random].upstash.io
#   Token: Long string starting with "Aeyl..."
#
# Optional: Only needed for production. Local development can use in-memory.

# UPSTASH_REDIS_REST_URL=your_upstash_redis_rest_url
# UPSTASH_REDIS_REST_TOKEN=your_upstash_redis_rest_token

# =============================================================================
# SECTION 6: OPTIONAL (RECOMMENDED) - Sentry for Error Tracking
# =============================================================================
#
# For Production Deployments: HIGHLY RECOMMENDED
# Captures JavaScript errors, performance metrics, and sends alerts
#
# Where to get:
#   - Dashboard: https://sentry.io/ (free tier available)
#   - Create Next.js project
#   - Copy DSN from project settings
#   - Pricing: Free tier for small projects, $29/mo for production
#
# Purpose:
#   - Automated error tracking and alerting
#   - Performance monitoring (Core Web Vitals, slow endpoints)
#   - Error grouping and trend analysis
#   - Session replay for debugging (premium)
#
# Format:
#   DSN: https://[hash]@[domain].ingest.sentry.io/[projectid]
#
# Configuration:
#   - Setup in sentry.next.config.js (next to next.config.js)
#   - Both client and server errors captured automatically
#   - Personal data (email, phone) scrubbed automatically
#
# Optional: Strongly recommended for production, optional for development.

# NEXT_PUBLIC_SENTRY_DSN=your_sentry_dsn

# =============================================================================
# SECTION 7: OPTIONAL - Twilio (SMS/Phone Authentication)
# =============================================================================
#
# Currently: Not actively used (using Supabase phone auth instead)
# For future: If implementing custom SMS provider
#
# Where to get:
#   - Dashboard: https://www.twilio.com/
#   - Sign up for Twilio account (paid)
#   - Console → Account Info → Copy Account SID and Auth Token
#   - Phone Numbers → Buy Number → Select and copy number
#
# Cost: ~$1/month per phone number + $0.0075 per SMS
#
# Note: Supabase offers built-in phone auth (via Twilio or Vonage)
#       which is simpler for most use cases

# TWILIO_ACCOUNT_SID=your_twilio_account_sid
# TWILIO_AUTH_TOKEN=your_twilio_auth_token
# TWILIO_PHONE_NUMBER=your_twilio_phone_number

# =============================================================================
# DEPLOYMENT VERIFICATION CHECKLIST
# =============================================================================
# Before deploying to production:
#
# Code & Repository:
#   ✅ All code committed to main branch
#   ✅ Tests passing: npm run test && npm run test:e2e
#   ✅ Build successful: npm run build (no errors)
#   ✅ No console.logs or debug code in production
#   ✅ ESLint clean: npm run lint (0 errors)
#
# Environment Variables:
#   ✅ All REQUIRED variables set (see Section 1-4)
#   ✅ No secrets in .env.example file
#   ✅ .env.local added to .gitignore
#   ✅ Secrets set in Vercel (not in code)
#   ✅ Service Role Key only in backend, never frontend
#   ✅ NEXT_PUBLIC_APP_URL uses HTTPS in production
#
# Infrastructure:
#   ✅ Vercel project created and deployed
#   ✅ Supabase project created (Pro plan for production)
#   ✅ Database migrations applied: npx supabase db push
#   ✅ RLS policies enabled on all tables
#   ✅ Backups configured (daily, 7+ day retention)
#
# Security:
#   ✅ SSL certificate valid (automatic on Vercel)
#   ✅ HSTS headers configured
#   ✅ Rate limiting enabled (Upstash Redis)
#   ✅ Input validation on all API routes
#   ✅ CORS properly configured
#
# Monitoring:
#   ✅ Sentry project created and DSN configured
#   ✅ Error tracking alerts set up
#   ✅ Performance monitoring enabled
#   ✅ Uptime monitoring configured
#
# Documentation:
#   ✅ Deployment procedures documented
#   ✅ Emergency procedures documented
#   ✅ Rollback procedures documented
#   ✅ Team trained on production access
#
# Testing:
#   ✅ Signup flow tested with real account
#   ✅ Login tested with real credentials
#   ✅ Video session creation and joining tested
#   ✅ Chat and messaging tested
#   ✅ Screen sharing tested
#   ✅ Recording tested
#   ✅ Performance verified (load times < 3s)
#   ✅ Mobile responsiveness verified
#
# =============================================================================
# HELPFUL RESOURCES
# =============================================================================
#
# Documentation:
#   - Supabase Setup: ./Docs/SUPABASE_PRODUCTION_SETUP.md
#   - Vercel Setup: ./Docs/VERCEL_PRODUCTION_SETUP.md
#   - Environment Variables: ./Docs/ENV_VARIABLES_CHECKLIST.md
#   - Security Guide: ./Docs/SECURITY_HARDENING.md
#   - Database Backup: ./Docs/DATABASE_BACKUP_RECOVERY.md
#
# Getting Help:
#   - Supabase Docs: https://supabase.com/docs
#   - Vercel Docs: https://vercel.com/docs
#   - 100ms Docs: https://www.100ms.live/docs
#   - Anthropic API: https://docs.anthropic.com/
#
# =============================================================================
